{
    "contents" : "############################\n### Simulation functions ### \n##\n## Last modification: new file\n## Date: 08/28/15\n## By: M Cefalu\n\n\n# expit function\nexpit <- function(x) exp(x)/(1+exp(x))\n\n# generate data\ngen.dta <- function(n,a=c(0,0),b=c(0,0),bx.mult=0,bx.add=0,s2=1){\n  # generate covariate\n  C = rnorm(n)\n  # generate treatment\n  X = rbinom(n,1,expit(cbind(1,C)%*%a))\n  # coefs for outcome\n  Y0 = rnorm(n,cbind(1,C)%*%b,sqrt(s2))\n  Y1 = Y0*exp(bx.mult) + bx.add\n  # observed Y\n  Y = X*Y1 + (1-X)*Y0\n  return(data.frame(Y=Y,X=X,C=C,Y0=Y0,Y1=Y1))\n}\n\n# transform from PS to treatment effect\n# NOT UP TO DATE!!!\nf = function(p,a,b,bx) {\n  # x is really C\n  x = (log(p/(1-p))-a[1])/a[2]\n  Y1 = g(cbind(1,x,1,x^2)%*%b)*exp(bx)\n  Y0 = g(cbind(1,x,0,0)%*%b)\n  return(Y1-Y0)\n}\n\n# function to calculate ATE\n# NOT UP TO DATE!!!!\nate = function(b) {\n  n = 1000000\n  C = rnorm(n)\n  Y1 = g(cbind(1,C,1,C)%*%b)\n  Y0 = g(cbind(1,C,0,0)%*%b)\n  return(mean(Y1-Y0))\n}\n",
    "created" : 1440780421782.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2845102472",
    "id" : "B1C95450",
    "lastKnownWriteTime" : 1441390743,
    "path" : "~/Documents/Research/Methods/Causal Inference/localPS/code/source/simulation_functions.r",
    "project_path" : "code/source/simulation_functions.r",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_source"
}